<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Redirecting…</title>
    <meta name="robots" content="noindex" />
  </head>
  <body>
    <script>
      (function () {
        var projectRoot = '/kimjongku_react';
        var redirectBase = projectRoot + '/';

        var path = window.location.pathname || '/';
        var search = window.location.search || '';
        var hash = window.location.hash || '';

        // 이미 p가 있으면 아무 것도 하지 않는다 (React가 처리)
        if (search.indexOf('p=') !== -1) {
          return;
        }

        // 프로젝트 루트 제거
        if (path.indexOf(projectRoot) === 0) {
          path = path.slice(projectRoot.length);
        }

        if (!path.startsWith('/')) {
          path = '/' + path;
        }

        window.location.replace(
          redirectBase +
            '?p=' +
            encodeURIComponent(path + hash)
        );
      })();
    </script>
  </body>
</html>
